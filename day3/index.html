<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://www.backbee.com/day3/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Day 3: Introduction to Content model - BlogBee, the BackBee tutorial</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-3459992-28', 'blogbee.backbee.com');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">BlogBee, the BackBee tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Summary</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorial <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../day1/">Day 1: Installation of BackBee</a>
                        </li>
                    
                        <li >
                            <a href="../day2/">Day 2: What is BlogBee</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Day 3: Introduction to Content model</a>
                        </li>
                    
                        <li >
                            <a href="../day4/">Day 4: the BackBee Edition mode</a>
                        </li>
                    
                        <li >
                            <a href="../day5/">Day 5: Creation of layouts</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../day2/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../day4/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/backbee/blogbee-docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#day-3-the-content-model">Day 3: the Content Model</a></li>
        
            <li><a href="#introduction">Introduction</a></li>
        
            <li><a href="#what-for-today">What for today?</a></li>
        
            <li><a href="#backbee-content-model">BackBee Content model</a></li>
        
            <li><a href="#article-implementation">Article implementation</a></li>
        
    
        <li class="main "><a href="#final-thoughts">Final thoughts</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="day-3-the-content-model">Day 3: the Content Model</h1>
<p>In the last episodes:</p>
<ul>
<li><a href="../day1/">Day1: Setup and install BackBee</a></li>
<li><a href="../day2/">Day2: Bootstrap of BlogBee project</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>Content model of BackBee is one of the most difficult part to understand.
Fortunately, the Content management system is highly inspired from standards with the aim to be fully compatible with <em>PHP Content Repository</em> API.</p>
<h2 id="what-for-today">What for today?</h2>
<p>As detailed in <strong>Day 2</strong> in AP stories, any User should be able to create an article, today we will
add the minimal files and configurations to allow any user to set up an article.</p>
<h2 id="backbee-content-model">BackBee Content model</h2>
<h3 id="what-is-the-php-content-repository">What is the PHP Content Repository?</h3>
<p>The PHP Content Repository is an adaptation of the Java Content Repository (<a href="http://en.wikipedia.org/wiki/Content_repository_API_for_Java" title="Java Content Repository">JCR</a>) standard, an open API specification defined in <a href="https://jcp.org/en/jsr/detail?id=283" title="Java Specification Request - 283">JSR-283</a>.
The API defines how to handle hierarchical semi-structured data in a consistent way.</p>
<p>The typical use case is content management systems. PHPCR combines the best of document-oriented databases (weak structured data) and of XML databases (hierarchical trees). On top of that, it adds useful features like searching, versioning, access control and locking on top of it.</p>
<p><strong>BackBee Content Management System</strong> follows most of the <em>PHP Content Repository</em> recommendations.</p>
<p>If you want to learn more about the PHPCR, you can read the <a href="http://phpcr.github.io/documentation/" title="PHPCR documentation">online documentation</a> or take a look at this <a href="http://davidbu.ch/slides/20130404-sflive_phpcr.html" title="PHP CR by David Buchmann">lecture from one of the PHPCR contributors</a> which provides a good understanding of the whole system.</p>
<h3 id="backbee-content-management-system">BackBee Content Management System</h3>
<p>BackBee Content Management System provides the following features:</p>
<ul>
<li>Access hierarchical tree</li>
<li>Access by UUID</li>
<li>Node search</li>
<li>Versioning</li>
<li>XML import &amp; export</li>
<li>Secured Access</li>
</ul>
<h4 id="site-pages">Site &amp; Pages</h4>
<p>A website can have multiple pages, and a page can have a parent page and a collection of "children" pages, ordered by "level" in the tree.</p>
<p>A page can have a parent (if not, the page is considered as a "root page"):</p>
<p><img alt="page tree" src="http://i.imgur.com/VWdneRE.png" title="page tree" /></p>
<h4 id="layout">Layout</h4>
<p>We have seen on <strong>Day 3</strong> the layouts, each page has a layout and all the contents are linked to the layout.
The reality is a little bit complex, because a page has a ContentSet (this is a special Content type: for now let's say this is an ordered collection of Content) which contains all the contents of the page.</p>
<p>When we need to render a web page, the <code>Renderer</code>:</p>
<ul>
<li>Checks if the Page ContentSet is not <code>null</code></li>
<li>Gets all the zones of the Page layout (1 column, 2 columns like the layouts defined on <em>Day 3</em>)</li>
<li>Loops on the contents of the ContentSet and <strong>puts the content</strong> on the correct column (or "zone")</li>
</ul>
<p>To conclude, <code>Layout</code> is used by the <code>Renderer</code> to put the correct content on the zones defined in the layout.</p>
<h4 id="content-element">Content Element</h4>
<p>A content element is a very simple yaml file, which has <em>properties</em> and <em>elements</em>.
For instance, this is the actual representation a <strong>text</strong> element:</p>
<pre><code class="yml"># BackBuilder\ClassContent\Element\text.yml
text:
  properties:
    name: Text
    description: A simple text input
  elements:
    value: !!scalar
</code></pre>

<p>A content element is not selectable in BackBee out of the box, in order to use it
you need to embed it into a Content. Notice a content element can have parameters too,
but it's not mandatory.</p>
<p>List of native content elements in BackBee:
 * <strong>text</strong>
   * <strong>date</strong>
   * <strong>select</strong>
 * <strong>file</strong>
   * <strong>attachment</strong>
   * <strong>image</strong>
 * <strong>keyword</strong>
 * <strong>link</strong></p>
<h4 id="content">Content</h4>
<p>The contents are also stored in an hierarchical tree, we can describe them
as a list of content elements (<code>BackBee\ClassContent\Element</code>).</p>
<p>Contents of your application are stored inside <code>repository\ClassContent</code> folder.</p>
<h5 id="how-to-build-a-content">How to build a Content ?</h5>
<p>For instance, this is the configuration for <em>Paragraph</em> content we want to allow users to use
in an article.</p>
<pre><code class="yml"># /repository/ClassContent/Article/Paragraph.yml
paragraph:
    properties:
        name: Paragraph
        description: Paragraph
        category: [Article]
    elements:
        body:
            type: BackBuilder\ClassContent\Element\text
</code></pre>

<p>A <strong>paragraph</strong> is an extend of the <strong>text</strong> element we have seen before, the interesting parts
of this configuration are:</p>
<ul>
<li><em>category</em>: allow the content to be displayed on "Edition mode"</li>
<li><em>type</em>: the related class, can be "scalar", "array" or the fully qualified class name (FQCN) which is an instance of <code>ClassContent</code>?</li>
</ul>
<p>Finally, this is the final rendering of this Content inside BackBee after you drag &amp; dropped the paragraph
inside the "Article" block.</p>
<p><img alt="the Paragraph Content" src="http://i.imgur.com/sZ9ZnJi.png" title="the Paragraph Content" /></p>
<h5 id="contentset">ContentSet</h5>
<p>A ContentSet is a content which accepts an ordered collection of contents.</p>
<h2 id="article-implementation">Article implementation</h2>
<p>All the contents created by the developer are located in the <code>/repository/ClassContent/</code> repository.
Today, we will focus on the <em>article</em> creation.</p>
<p>Reminder, an article consists of:</p>
<ul>
<li>A title</li>
<li>A picture</li>
<li>An abstract</li>
<li>A body which is a rich content</li>
</ul>
<p>The <code>article</code> content configuration will be set to multiple YAML files to allow reuse.</p>
<h3 id="yaml-files">Yaml files</h3>
<pre><code>repository/
    ClassContent/
        Article.yml
        Article/
            Body.yml
            Paragraph.yml
            Picture.yml
            ColumnDivider.yml
</code></pre>

<pre><code class="yml"># /repository/ClassContent/Article/Paragraph.yml
paragraph:
    properties:
        name: Paragraph
        description: Paragraph
        category: [Article]
    elements:
        body:
            type: BackBee\ClassContent\Element\text
</code></pre>

<pre><code class="yml"># /repository/ClassContent/Article/Picture.yml
picture:
    properties:
        name: Article picture
        description: A media image
        category: [Article]
    elements:
        title:
            type: BackBee\ClassContent\Element\Text
        image:
            type: BackBee\ClassContent\Element\Image
</code></pre>

<pre><code class="yml"># /repository/ClassContent/Article/ColumnDivider.yml
column_divider:
    properties:
        name: &quot;Column Divider&quot;
        description: &quot;&quot;
        category: [Article]
    elements:
        left:
            type: \BackBee\ClassContent\Container\OneColumn
        right:
            type: \BackBee\ClassContent\Container\OneColumn
</code></pre>

<pre><code class="yml"># /repository/ClassContent/Article.yml
article:
    properties:
        name: Article
        description: &quot;An article contains title, abstract, main image and a customizable body&quot;
        category: [article]
    elements:
        title:
            type: BackBee\ClassContent\Element\Text
        abstract:
            type: BackBee\ClassContent\Text\Paragraph
        body:
            type: BackBee\ClassContent\Article\Body
        image:
            type: BackBee\ClassContent\Media\Image
</code></pre>

<p>After adding this configuration file, reconnect to Edition Mode and create a new page with "Article" layout.</p>
<p>Access to this new page and look at the result:</p>
<p><img alt="article page" src="http://i.imgur.com/a8ppU97.png" title="article page" /></p>
<h1 id="final-thoughts">Final thoughts</h1>
<p>Well, time is over!</p>
<p>We now have a better understanding on how BackBee manage its contents, tomorrow we will explore more the Editor mode
and we will go further on the "Content" model of BackBee.</p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<center>Copyright &copy; 2014-2015, <a href="http://www.backbee.com">BackBee project</a>.</center>
		
		<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
	</footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>
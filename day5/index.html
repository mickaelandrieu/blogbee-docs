<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://www.backbee.com/day5/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Day 5: Creating layouts - BlogBee, the BackBee tutorial</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-3459992-28', 'blogbee.backbee.com');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">BlogBee, the BackBee tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Summary</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorial <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../day1/">Day 1: Installation of BackBee</a>
                        </li>
                    
                        <li >
                            <a href="../day2/">Day 2: What is BlogBee</a>
                        </li>
                    
                        <li >
                            <a href="../day3/">Day 3: Introduction to Content model</a>
                        </li>
                    
                        <li >
                            <a href="../day4/">Day 4: the BackBee Edition mode</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Day 5: Creating layouts</a>
                        </li>
                    
                        <li >
                            <a href="../day6/">Day 6: Introduction to Bundles</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../day4/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../day6/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/backbee/blogbee-docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#day-5-creating-layouts">Day 5: Creating layouts</a></li>
        
            <li><a href="#introduction">Introduction</a></li>
        
            <li><a href="#whats-for-today">What's for today?</a></li>
        
    
        <li class="main "><a href="#what-is-a-layout">What is a layout?</a></li>
        
            <li><a href="#the-big-picture">the "big picture"</a></li>
        
            <li><a href="#layoutbuilderbundle-installation">LayoutBuilderBundle installation</a></li>
        
            <li><a href="#archive-layout-creation">Archive layout creation</a></li>
        
    
        <li class="main "><a href="#final-thoughts">Final thoughts</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="day-5-creating-layouts">Day 5: Creating layouts</h1>
<p>In the last episodes:</p>
<ul>
<li><a href="../day1/">Day1: Setup and install BackBee</a></li>
<li><a href="../day2/">Day2: Bootstrap of BlogBee project</a></li>
<li><a href="../day3/">Day3: Introduction to Content model</a></li>
<li><a href="../day4/">Day4: The BackBee Edition mode</a></li>
</ul>
<h2 id="introduction">Introduction</h2>
<p>In BackBee, one of the first steps when creating a website is designing layouts that defines the overall organization of the site. BackBee Standard Edition provides "Home" and "Article" layouts. This is enough to create our website, but we will create an "Archive"  page to understand and implement the layout design.</p>
<h2 id="whats-for-today">What's for today?</h2>
<p>In <strong>Day 4</strong>, we discovered the toolbar and we saw that layout creation was unavailable. Currently, BackBee doesn't provide an "out of box" way to create your own layouts. Fortunately, the community shares a <em>Bundle for that</em> called the LayoutBuilderBundle.
So let's install this Bundle and use it to create the "Archive" layout.</p>
<h1 id="what-is-a-layout">What is a layout?</h1>
<h2 id="the-big-picture">the "big picture"</h2>
<p>Let's start with a schema which describes the architecture of our <em>Article page</em>:</p>
<p><img alt="the BackBee big picture" src="http://i.imgur.com/sLLJ19x.png" title="the BackBee big picture" /></p>
<p>Each element is represented as a PHP class in <strong>BackBee core library</strong>:</p>
<ul>
<li><strong>Site</strong> (<code>BackBee\Site\Site</code>) is your application.</li>
<li><strong>Page</strong> (<code>BackBee\NestedNode\Page</code>) represents each page of your application, for example in BlogBee have three pages: a home page, an article page and an author page.</li>
<li><strong>Layout</strong> (<code>BackBee\Site\Layout</code>) represents the page layout.</li>
<li><strong>ContentSet</strong> (<code>BackBee\ClassContent\ContentSet</code>) represents the blocks/columns of your layouts, some blocks can be edited by users.</li>
</ul>
<h2 id="layoutbuilderbundle-installation">LayoutBuilderBundle installation</h2>
<blockquote>
<p>A complete day will be dedicated to bundle system in BackBee</p>
</blockquote>
<p>Add the official LayoutBuilder bundle using Composer.
For instance, you can add the following line to your <code>composer.json</code> file:</p>
<pre><code class="javascript">{
    // ...
    &quot;require&quot;: {
        // ...
        &quot;backbee/layout-builder-bundle&quot;: &quot;1.0.*@dev&quot;
    },
}
</code></pre>

<p>And then install the dependency in <code>vendor</code>:</p>
<pre><code class="bash">$ composer update
</code></pre>

<blockquote>
<p>The command needs to be executed in the folder where the <code>composer.json</code> is located.</p>
</blockquote>
<p>Finaly, register the bundle in BackBee application: add this line at the end of the file <code>repository/Config/bundles.yml</code>.</p>
<pre><code class="yaml"># bundles configuration
debug: BackBee\Bundle\DebugBundle\Debug
demo: BackBee\Bundle\DemoBundle\Demo
toolbar: BackBee\Bundle\ToolbarBundle\Toolbar
layoutbuilder: BackBee\Bundle\LayoutBuilderBundle\LayoutBuilder
</code></pre>

<p>If the application is running in <em>production mode</em>, you may need to empty the application's cache:</p>
<pre><code class="bash">$ ./backbee cache:clear
</code></pre>

<h2 id="archive-layout-creation">Archive layout creation</h2>
<h3 id="configuration-file">Configuration file</h3>
<p>To create an archive layout, you will require a YAML configuration file in a new folder <code>repository\Layouts\Definitions</code> and a template.</p>
<p>The archive layout will be composed of one main column and a side column, both accept all availables blocks.</p>
<pre><code class="yaml"># Archive.yml
template: Archive.twig
label: Archive Page Layout
columns:
  MainColumn:
    mainZone: true
    accept: ~
    maxentry: ~
    defaultClassContent: ~
    inherited: false
  SidePane:
    mainZone: false
    accept: ~
    maxentry: ~
    defaultClassContent: ~
    inherited: true
</code></pre>

<p>This configuration will require three sections: <code>template</code>, <code>label</code> and <code>columns</code>.</p>
<ul>
<li><code>template</code>: template relative path. By default, the Renderer will look into the <code>repository/Layouts</code> folder;</li>
<li><code>label</code>: template name, will be displayed in the "Template" select list when we create a new page;</li>
<li><code>columns</code>: a list of columns that acts like Main content sets (cf schema above)</li>
</ul>
<p>For each named column, the following properties are available:</p>
<ul>
<li><code>mainZone</code>: if <em>true</em>, link all contents from this column to the page;</li>
<li><code>accept</code>: a collection of ClassContent that the column can accept, all by default;</li>
<li><code>maxentry</code>: limits the number of class contents in this column, <em>infinity</em> by default;</li>
<li><code>defaultClassContent</code>: if used, by default this ClassContent will be added to the column;</li>
<li><code>inherited</code>: if <em>true</em>, the content of this column is inherited from parent pages</li>
</ul>
<h3 id="template-file">Template file</h3>
<p>Now we need to create a simple template. To render a column, use the <code>container()</code> to get it in your templates.:</p>
<pre><code class="jinja">{% extends &quot;Main.twig&quot; %}

{% block content %}
&lt;!-- BEGIn cols --&gt;
&lt;div class=&quot;contentcol row&quot;&gt;
    &lt;div class=&quot;col-sm-8 content-area&quot; id=&quot;content&quot;&gt;
        {{ this.container().first()|raw }}
    &lt;/div&gt;
    &lt;aside class=&quot;col-sm-4 aside&quot;&gt;
        {{ this.container().next()|raw }}
    &lt;/aside&gt;
&lt;/div&gt;
&lt;!-- END cols --&gt;
{% endblock %}
</code></pre>

<p>Finally, use the command line interface provided by the Bundle:</p>
<pre><code class="bash">$ ./backbee layout:create --layout=Archive --site=blogbee.dev
</code></pre>

<blockquote>
<p>The <code>site</code> argument can accept URI or Site Label (available in <code>sites.yml</code>).</p>
</blockquote>
<h1 id="final-thoughts">Final thoughts</h1>
<p>This tutorial is now over!</p>
<p>We reviewed many features and you should now be able to create a simple website by yourself.
We know how to integrate layouts and templates, to configure contents and make them dynamic and editable by users.</p>
<p>In next days, we will dive into the BackBee discovery by reviewing everything from bundle creation to events listeners and provide you with keys tips on how to improve your own BlogBee application!</p></div>
        </div>

	<footer class="col-md-12">
		<hr>
		
		<center>Copyright &copy; 2014-2015, <a href="http://www.backbee.com">BackBee project</a>.</center>
		
		<center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
	</footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>